import{S as Qn,r as Zn,v as jn,q as kn,p as bn,W as nt,O as An,F as tt,B as et,c as it,a as rt,L as ot,w as lt,x as ut,y as ft,k as at,M as ct,R as st}from"./three.module-BoKgPBlm.js";import{O as pt}from"./OrbitControls-CSmSuB8c.js";import{r as ht,o as vt,c as gt,a as dt}from"./index-DiAP8KEY.js";class wt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const a=i[r],s=t+a,c=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);c&&(i[e++]=c),t=s}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,a,s=0;if(i>0){for(s=t[--i];i>0&&(e=s,r=t[--i],s=e+r,a=r-(s-e),!a););i>0&&(a<0&&t[i-1]<0||a>0&&t[i-1]>0)&&(r=a*2,e=s+r,r==e-s&&(s=e))}return s}}function*St(n){for(const t of n)yield*t}function Xn(n){return Array.from(St(n))}var T=1e-6,Et=1e-12,z=Math.PI,x=z/2,Nn=z/4,Y=z*2,X=180/z,q=z/180,O=Math.abs,Un=Math.atan,nn=Math.atan2,_=Math.cos,yt=Math.exp,Mt=Math.log,W=Math.sin,mt=Math.sign||function(n){return n>0?1:n<0?-1:0},vn=Math.sqrt,Pt=Math.tan;function Rt(n){return n>1?0:n<-1?z:Math.acos(n)}function tn(n){return n>1?x:n<-1?-x:Math.asin(n)}function k(){}function cn(n,t){n&&In.hasOwnProperty(n.type)&&In[n.type](n,t)}var Cn={Feature:function(n,t){cn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)cn(i[e].geometry,t)}},In={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){wn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)wn(i[e],t,0)},Polygon:function(n,t){zn(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)zn(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)cn(i[e],t)}};function wn(n,t,i){var e=-1,r=n.length-i,a;for(t.lineStart();++e<r;)a=n[e],t.point(a[0],a[1],a[2]);t.lineEnd()}function zn(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)wn(n[i],t,1);t.polygonEnd()}function Lt(n,t){n&&Cn.hasOwnProperty(n.type)?Cn[n.type](n,t):cn(n,t)}function Sn(n){return[nn(n[1],n[0]),tn(n[2])]}function Q(n){var t=n[0],i=n[1],e=_(i);return[e*_(t),e*W(t),W(i)]}function on(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function sn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function gn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ln(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function En(n){var t=vn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function yn(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function Mn(n,t){return O(n)>z&&(n-=Math.round(n/Y)*Y),[n,t]}Mn.invert=Mn;function Yn(n,t,i){return(n%=Y)?t||i?yn(Dn(n),Tn(t,i)):Dn(n):t||i?Tn(t,i):Mn}function Bn(n){return function(t,i){return t+=n,O(t)>z&&(t-=Math.round(t/Y)*Y),[t,i]}}function Dn(n){var t=Bn(n);return t.invert=Bn(-n),t}function Tn(n,t){var i=_(n),e=W(n),r=_(t),a=W(t);function s(c,g){var v=_(g),o=_(c)*v,l=W(c)*v,u=W(g),p=u*i+o*e;return[nn(l*r-p*a,o*i-u*e),tn(p*r+l*a)]}return s.invert=function(c,g){var v=_(g),o=_(c)*v,l=W(c)*v,u=W(g),p=u*r-l*a;return[nn(l*r+u*a,o*i+p*e),tn(p*i-o*e)]},s}function At(n){n=Yn(n[0]*q,n[1]*q,n.length>2?n[2]*q:0);function t(i){return i=n(i[0]*q,i[1]*q),i[0]*=X,i[1]*=X,i}return t.invert=function(i){return i=n.invert(i[0]*q,i[1]*q),i[0]*=X,i[1]*=X,i},t}function Nt(n,t,i,e,r,a){if(i){var s=_(t),c=W(t),g=e*i;r==null?(r=t+e*Y,a=t-g/2):(r=Hn(s,r),a=Hn(s,a),(e>0?r<a:r>a)&&(r+=e*Y));for(var v,o=r;e>0?o>a:o<a;o-=g)v=Sn([s,-c*_(o),-c*W(o)]),n.point(v[0],v[1])}}function Hn(n,t){t=Q(t),t[0]-=n,En(t);var i=Rt(-t[1]);return((-t[2]<0?-i:i)+Y-T)%Y}function Jn(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:k,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function an(n,t){return O(n[0]-t[0])<T&&O(n[1]-t[1])<T}function un(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Vn(n,t,i,e,r){var a=[],s=[],c,g;if(n.forEach(function(h){if(!((P=h.length-1)<=0)){var P,d=h[0],L=h[P],w;if(an(d,L)){if(!d[2]&&!L[2]){for(r.lineStart(),c=0;c<P;++c)r.point((d=h[c])[0],d[1]);r.lineEnd();return}L[0]+=2*T}a.push(w=new un(d,h,null,!0)),s.push(w.o=new un(d,null,w,!1)),a.push(w=new un(L,h,null,!1)),s.push(w.o=new un(L,null,w,!0))}}),!!a.length){for(s.sort(t),On(a),On(s),c=0,g=s.length;c<g;++c)s[c].e=i=!i;for(var v=a[0],o,l;;){for(var u=v,p=!0;u.v;)if((u=u.n)===v)return;o=u.z,r.lineStart();do{if(u.v=u.o.v=!0,u.e){if(p)for(c=0,g=o.length;c<g;++c)r.point((l=o[c])[0],l[1]);else e(u.x,u.n.x,1,r);u=u.n}else{if(p)for(o=u.p.z,c=o.length-1;c>=0;--c)r.point((l=o[c])[0],l[1]);else e(u.x,u.p.x,-1,r);u=u.p}u=u.o,o=u.z,p=!p}while(!u.v);r.lineEnd()}}}function On(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function dn(n){return O(n[0])<=z?n[0]:mt(n[0])*((O(n[0])+z)%Y-z)}function Ct(n,t){var i=dn(t),e=t[1],r=W(e),a=[W(i),-_(i),0],s=0,c=0,g=new wt;r===1?e=x+T:r===-1&&(e=-x-T);for(var v=0,o=n.length;v<o;++v)if(u=(l=n[v]).length)for(var l,u,p=l[u-1],h=dn(p),P=p[1]/2+Nn,d=W(P),L=_(P),w=0;w<u;++w,h=E,d=M,L=N,p=R){var R=l[w],E=dn(R),A=R[1]/2+Nn,M=W(A),N=_(A),y=E-h,S=y>=0?1:-1,B=S*y,m=B>z,H=d*M;if(g.add(nn(H*S*W(B),L*N+H*_(B))),s+=m?y+S*Y:y,m^h>=i^E>=i){var D=sn(Q(p),Q(R));En(D);var I=sn(a,D);En(I);var f=(m^y>=0?-1:1)*tn(I[2]);(e>f||e===f&&(D[0]||D[1]))&&(c+=m^y>=0?1:-1)}}return(s<-T||s<T&&g<-Et)^c&1}function $n(n,t,i,e){return function(r){var a=t(r),s=Jn(),c=t(s),g=!1,v,o,l,u={point:p,lineStart:P,lineEnd:d,polygonStart:function(){u.point=L,u.lineStart=w,u.lineEnd=R,o=[],v=[]},polygonEnd:function(){u.point=p,u.lineStart=P,u.lineEnd=d,o=Xn(o);var E=Ct(v,e);o.length?(g||(r.polygonStart(),g=!0),Vn(o,zt,E,i,r)):E&&(g||(r.polygonStart(),g=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),o=v=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(E,A){n(E,A)&&r.point(E,A)}function h(E,A){a.point(E,A)}function P(){u.point=h,a.lineStart()}function d(){u.point=p,a.lineEnd()}function L(E,A){l.push([E,A]),c.point(E,A)}function w(){c.lineStart(),l=[]}function R(){L(l[0][0],l[0][1]),c.lineEnd();var E=c.clean(),A=s.result(),M,N=A.length,y,S,B;if(l.pop(),v.push(l),l=null,!!N){if(E&1){if(S=A[0],(y=S.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),M=0;M<y;++M)r.point((B=S[M])[0],B[1]);r.lineEnd()}return}N>1&&E&2&&A.push(A.pop().concat(A.shift())),o.push(A.filter(It))}}return u}}function It(n){return n.length>1}function zt(n,t){return((n=n.x)[0]<0?n[1]-x-T:x-n[1])-((t=t.x)[0]<0?t[1]-x-T:x-t[1])}const _n=$n(function(){return!0},Bt,Tt,[-z,-x]);function Bt(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(a,s){var c=a>0?z:-z,g=O(a-t);O(g-z)<T?(n.point(t,i=(i+s)/2>0?x:-x),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(c,i),n.point(a,i),r=0):e!==c&&g>=z&&(O(t-e)<T&&(t-=e*T),O(a-c)<T&&(a-=c*T),i=Dt(t,i,a,s),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(c,i),r=0),n.point(t=a,i=s),e=c},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function Dt(n,t,i,e){var r,a,s=W(n-i);return O(s)>T?Un((W(t)*(a=_(e))*W(i)-W(e)*(r=_(t))*W(n))/(r*a*s)):(t+e)/2}function Tt(n,t,i,e){var r;if(n==null)r=i*x,e.point(-z,r),e.point(0,r),e.point(z,r),e.point(z,0),e.point(z,-r),e.point(0,-r),e.point(-z,-r),e.point(-z,0),e.point(-z,r);else if(O(n[0]-t[0])>T){var a=n[0]<t[0]?z:-z;r=i*a/2,e.point(-a,r),e.point(0,r),e.point(a,r)}else e.point(t[0],t[1])}function Ht(n){var t=_(n),i=2*q,e=t>0,r=O(t)>T;function a(o,l,u,p){Nt(p,n,i,u,o,l)}function s(o,l){return _(o)*_(l)>t}function c(o){var l,u,p,h,P;return{lineStart:function(){h=p=!1,P=1},point:function(d,L){var w=[d,L],R,E=s(d,L),A=e?E?0:v(d,L):E?v(d+(d<0?z:-z),L):0;if(!l&&(h=p=E)&&o.lineStart(),E!==p&&(R=g(l,w),(!R||an(l,R)||an(w,R))&&(w[2]=1)),E!==p)P=0,E?(o.lineStart(),R=g(w,l),o.point(R[0],R[1])):(R=g(l,w),o.point(R[0],R[1],2),o.lineEnd()),l=R;else if(r&&l&&e^E){var M;!(A&u)&&(M=g(w,l,!0))&&(P=0,e?(o.lineStart(),o.point(M[0][0],M[0][1]),o.point(M[1][0],M[1][1]),o.lineEnd()):(o.point(M[1][0],M[1][1]),o.lineEnd(),o.lineStart(),o.point(M[0][0],M[0][1],3)))}E&&(!l||!an(l,w))&&o.point(w[0],w[1]),l=w,p=E,u=A},lineEnd:function(){p&&o.lineEnd(),l=null},clean:function(){return P|(h&&p)<<1}}}function g(o,l,u){var p=Q(o),h=Q(l),P=[1,0,0],d=sn(p,h),L=on(d,d),w=d[0],R=L-w*w;if(!R)return!u&&o;var E=t*L/R,A=-t*w/R,M=sn(P,d),N=ln(P,E),y=ln(d,A);gn(N,y);var S=M,B=on(N,S),m=on(S,S),H=B*B-m*(on(N,N)-1);if(!(H<0)){var D=vn(H),I=ln(S,(-B-D)/m);if(gn(I,N),I=Sn(I),!u)return I;var f=o[0],C=l[0],F=o[1],G=l[1],U;C<f&&(U=f,f=C,C=U);var j=C-f,J=O(j-z)<T,$=J||j<T;if(!J&&G<F&&(U=F,F=G,G=U),$?J?F+G>0^I[1]<(O(I[0]-f)<T?F:G):F<=I[1]&&I[1]<=G:j>z^(f<=I[0]&&I[0]<=C)){var V=ln(S,(-B+D)/m);return gn(V,N),[I,Sn(V)]}}}function v(o,l){var u=e?n:z-n,p=0;return o<-u?p|=1:o>u&&(p|=2),l<-u?p|=4:l>u&&(p|=8),p}return $n(s,c,a,e?[0,-n]:[-z,n-z])}function Ot(n,t,i,e,r,a){var s=n[0],c=n[1],g=t[0],v=t[1],o=0,l=1,u=g-s,p=v-c,h;if(h=i-s,!(!u&&h>0)){if(h/=u,u<0){if(h<o)return;h<l&&(l=h)}else if(u>0){if(h>l)return;h>o&&(o=h)}if(h=r-s,!(!u&&h<0)){if(h/=u,u<0){if(h>l)return;h>o&&(o=h)}else if(u>0){if(h<o)return;h<l&&(l=h)}if(h=e-c,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<l&&(l=h)}else if(p>0){if(h>l)return;h>o&&(o=h)}if(h=a-c,!(!p&&h<0)){if(h/=p,p<0){if(h>l)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<l&&(l=h)}return o>0&&(n[0]=s+o*u,n[1]=c+o*p),l<1&&(t[0]=s+l*u,t[1]=c+l*p),!0}}}}}var b=1e9,fn=-b;function _t(n,t,i,e){function r(v,o){return n<=v&&v<=i&&t<=o&&o<=e}function a(v,o,l,u){var p=0,h=0;if(v==null||(p=s(v,l))!==(h=s(o,l))||g(v,o)<0^l>0)do u.point(p===0||p===3?n:i,p>1?e:t);while((p=(p+l+4)%4)!==h);else u.point(o[0],o[1])}function s(v,o){return O(v[0]-n)<T?o>0?0:3:O(v[0]-i)<T?o>0?2:1:O(v[1]-t)<T?o>0?1:0:o>0?3:2}function c(v,o){return g(v.x,o.x)}function g(v,o){var l=s(v,1),u=s(o,1);return l!==u?l-u:l===0?o[1]-v[1]:l===1?v[0]-o[0]:l===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,l=Jn(),u,p,h,P,d,L,w,R,E,A,M,N={point:y,lineStart:H,lineEnd:D,polygonStart:B,polygonEnd:m};function y(f,C){r(f,C)&&o.point(f,C)}function S(){for(var f=0,C=0,F=p.length;C<F;++C)for(var G=p[C],U=1,j=G.length,J=G[0],$,V,rn=J[0],K=J[1];U<j;++U)$=rn,V=K,J=G[U],rn=J[0],K=J[1],V<=e?K>e&&(rn-$)*(e-V)>(K-V)*(n-$)&&++f:K<=e&&(rn-$)*(e-V)<(K-V)*(n-$)&&--f;return f}function B(){o=l,u=[],p=[],M=!0}function m(){var f=S(),C=M&&f,F=(u=Xn(u)).length;(C||F)&&(v.polygonStart(),C&&(v.lineStart(),a(null,null,1,v),v.lineEnd()),F&&Vn(u,c,f,a,v),v.polygonEnd()),o=v,u=p=h=null}function H(){N.point=I,p&&p.push(h=[]),A=!0,E=!1,w=R=NaN}function D(){u&&(I(P,d),L&&E&&l.rejoin(),u.push(l.result())),N.point=y,E&&o.lineEnd()}function I(f,C){var F=r(f,C);if(p&&h.push([f,C]),A)P=f,d=C,L=F,A=!1,F&&(o.lineStart(),o.point(f,C));else if(F&&E)o.point(f,C);else{var G=[w=Math.max(fn,Math.min(b,w)),R=Math.max(fn,Math.min(b,R))],U=[f=Math.max(fn,Math.min(b,f)),C=Math.max(fn,Math.min(b,C))];Ot(G,U,n,t,i,e)?(E||(o.lineStart(),o.point(G[0],G[1])),o.point(U[0],U[1]),F||o.lineEnd(),M=!1):F&&(o.lineStart(),o.point(f,C),M=!1)}w=f,R=C,E=F}return N}}const Wn=n=>n;var Z=1/0,pn=Z,en=-Z,hn=en,qn={point:Wt,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var n=[[Z,pn],[en,hn]];return en=hn=-(pn=Z=1/0),n}};function Wt(n,t){n<Z&&(Z=n),n>en&&(en=n),t<pn&&(pn=t),t>hn&&(hn=t)}function Pn(n){return function(t){var i=new mn;for(var e in n)i[e]=n[e];return i.stream=t,i}}function mn(){}mn.prototype={constructor:mn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rn(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),Lt(i,n.stream(qn)),t(qn.result()),e!=null&&n.clipExtent(e),n}function Kn(n,t,i){return Rn(n,function(e){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(e[1][0]-e[0][0]),a/(e[1][1]-e[0][1])),c=+t[0][0]+(r-s*(e[1][0]+e[0][0]))/2,g=+t[0][1]+(a-s*(e[1][1]+e[0][1]))/2;n.scale(150*s).translate([c,g])},i)}function qt(n,t,i){return Kn(n,[[0,0],t],i)}function Ft(n,t,i){return Rn(n,function(e){var r=+t,a=r/(e[1][0]-e[0][0]),s=(r-a*(e[1][0]+e[0][0]))/2,c=-a*e[0][1];n.scale(150*a).translate([s,c])},i)}function Gt(n,t,i){return Rn(n,function(e){var r=+t,a=r/(e[1][1]-e[0][1]),s=-a*e[0][0],c=(r-a*(e[1][1]+e[0][1]))/2;n.scale(150*a).translate([s,c])},i)}var Fn=16,xt=_(30*q);function Gn(n,t){return+t?Ut(n,t):Xt(n)}function Xt(n){return Pn({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function Ut(n,t){function i(e,r,a,s,c,g,v,o,l,u,p,h,P,d){var L=v-e,w=o-r,R=L*L+w*w;if(R>4*t&&P--){var E=s+u,A=c+p,M=g+h,N=vn(E*E+A*A+M*M),y=tn(M/=N),S=O(O(M)-1)<T||O(a-l)<T?(a+l)/2:nn(A,E),B=n(S,y),m=B[0],H=B[1],D=m-e,I=H-r,f=w*D-L*I;(f*f/R>t||O((L*D+w*I)/R-.5)>.3||s*u+c*p+g*h<xt)&&(i(e,r,a,s,c,g,m,H,S,E/=N,A/=N,M,P,d),d.point(m,H),i(m,H,S,E,A,M,v,o,l,u,p,h,P,d))}}return function(e){var r,a,s,c,g,v,o,l,u,p,h,P,d={point:L,lineStart:w,lineEnd:E,polygonStart:function(){e.polygonStart(),d.lineStart=A},polygonEnd:function(){e.polygonEnd(),d.lineStart=w}};function L(y,S){y=n(y,S),e.point(y[0],y[1])}function w(){l=NaN,d.point=R,e.lineStart()}function R(y,S){var B=Q([y,S]),m=n(y,S);i(l,u,o,p,h,P,l=m[0],u=m[1],o=y,p=B[0],h=B[1],P=B[2],Fn,e),e.point(l,u)}function E(){d.point=L,e.lineEnd()}function A(){w(),d.point=M,d.lineEnd=N}function M(y,S){R(r=y,S),a=l,s=u,c=p,g=h,v=P,d.point=R}function N(){i(l,u,o,p,h,P,a,s,r,c,g,v,Fn,e),d.lineEnd=E,E()}return d}}var Yt=Pn({point:function(n,t){this.stream.point(n*q,t*q)}});function Jt(n){return Pn({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function Vt(n,t,i,e,r){function a(s,c){return s*=e,c*=r,[t+n*s,i-n*c]}return a.invert=function(s,c){return[(s-t)/n*e,(i-c)/n*r]},a}function xn(n,t,i,e,r,a){if(!a)return Vt(n,t,i,e,r);var s=_(a),c=W(a),g=s*n,v=c*n,o=s/n,l=c/n,u=(c*i-s*t)/n,p=(c*t+s*i)/n;function h(P,d){return P*=e,d*=r,[g*P-v*d+t,i-v*P-g*d]}return h.invert=function(P,d){return[e*(o*P-l*d+u),r*(p-l*P-o*d)]},h}function $t(n){return Kt(function(){return n})()}function Kt(n){var t,i=150,e=480,r=250,a=0,s=0,c=0,g=0,v=0,o,l=0,u=1,p=1,h=null,P=_n,d=null,L,w,R,E=Wn,A=.5,M,N,y,S,B;function m(f){return y(f[0]*q,f[1]*q)}function H(f){return f=y.invert(f[0],f[1]),f&&[f[0]*X,f[1]*X]}m.stream=function(f){return S&&B===f?S:S=Yt(Jt(o)(P(M(E(B=f)))))},m.preclip=function(f){return arguments.length?(P=f,h=void 0,I()):P},m.postclip=function(f){return arguments.length?(E=f,d=L=w=R=null,I()):E},m.clipAngle=function(f){return arguments.length?(P=+f?Ht(h=f*q):(h=null,_n),I()):h*X},m.clipExtent=function(f){return arguments.length?(E=f==null?(d=L=w=R=null,Wn):_t(d=+f[0][0],L=+f[0][1],w=+f[1][0],R=+f[1][1]),I()):d==null?null:[[d,L],[w,R]]},m.scale=function(f){return arguments.length?(i=+f,D()):i},m.translate=function(f){return arguments.length?(e=+f[0],r=+f[1],D()):[e,r]},m.center=function(f){return arguments.length?(a=f[0]%360*q,s=f[1]%360*q,D()):[a*X,s*X]},m.rotate=function(f){return arguments.length?(c=f[0]%360*q,g=f[1]%360*q,v=f.length>2?f[2]%360*q:0,D()):[c*X,g*X,v*X]},m.angle=function(f){return arguments.length?(l=f%360*q,D()):l*X},m.reflectX=function(f){return arguments.length?(u=f?-1:1,D()):u<0},m.reflectY=function(f){return arguments.length?(p=f?-1:1,D()):p<0},m.precision=function(f){return arguments.length?(M=Gn(N,A=f*f),I()):vn(A)},m.fitExtent=function(f,C){return Kn(m,f,C)},m.fitSize=function(f,C){return qt(m,f,C)},m.fitWidth=function(f,C){return Ft(m,f,C)},m.fitHeight=function(f,C){return Gt(m,f,C)};function D(){var f=xn(i,0,0,u,p,l).apply(null,t(a,s)),C=xn(i,e-f[0],r-f[1],u,p,l);return o=Yn(c,g,v),N=yn(t,C),y=yn(o,N),M=Gn(N,A),I()}function I(){return S=B=null,m}return function(){return t=n.apply(this,arguments),m.invert=t.invert&&H,D()}}function Ln(n,t){return[n,Mt(Pt((x+t)/2))]}Ln.invert=function(n,t){return[n,2*Un(yt(t))-x]};function Qt(){return Zt(Ln).scale(961/Y)}function Zt(n){var t=$t(n),i=t.center,e=t.scale,r=t.translate,a=t.clipExtent,s=null,c,g,v;t.scale=function(l){return arguments.length?(e(l),o()):e()},t.translate=function(l){return arguments.length?(r(l),o()):r()},t.center=function(l){return arguments.length?(i(l),o()):i()},t.clipExtent=function(l){return arguments.length?(l==null?s=c=g=v=null:(s=+l[0][0],c=+l[0][1],g=+l[1][0],v=+l[1][1]),o()):s==null?null:[[s,c],[g,v]]};function o(){var l=z*e(),u=t(At(t.rotate()).invert([0,0]));return a(s==null?[[u[0]-l,u[1]-l],[u[0]+l,u[1]+l]]:n===Ln?[[Math.max(u[0]-l,s),c],[Math.min(u[0]+l,g),v]]:[[s,Math.max(u[1]-l,c)],[g,Math.min(u[1]+l,v)]])}return o()}const ne={__name:"Map",setup(n){let t=ht(),i=new Qn,e=new Zn(90,window.innerWidth/window.innerHeight,.1,1e5);e.position.set(0,0,100),e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),i.add(e);let r=new jn(5);i.add(r);let a=new kn(16777215,1);i.add(a);const s=new bn(16777215,.5);i.add(s);let c=new nt;c.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",()=>{e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight),c.setPixelRatio(window.devicePixelRatio)});let g=new pt(e,c.domElement);g.enableDamping=!0;let v=()=>{g.update(),requestAnimationFrame(v),c.render(i,e)};v();let o=new An,l=Qt().center([116.402,39.915]).translate([0,0,0]),u=new tt,p=new URL("/assets/map-BqTUXMPq.json",import.meta.url).href;u.load(p,M=>{let N=JSON.parse(M);h(N)});let h=M=>{M.features.forEach(y=>{let S=new An;S.name=y.properties.name;let B=y.geometry.coordinates,m="#99ff99";y.geometry.type==="MultiPolygon"&&B.forEach(H=>{H.forEach(D=>{let I=P(D,m,l),f=d(D,m,l);f.properties=y.properties.name,S.add(I),S.add(f)})}),y.geometry.type==="Polygon"&&B.forEach(H=>{let D=P(H,m,l),I=d(H,m,l);I.properties=y.properties.name,S.add(D),S.add(I)}),o.add(S)}),i.add(o)},P=(M,N,y)=>{let S=new et,B=new Array;M.forEach(D=>{let[I,f]=y(D);B.push(new it(I,-f,5))}),S.setFromPoints(B);let m=new rt(Math.random()*.5+.5,Math.random()*.5+.5,Math.random()*.5+.5),H=new ot({color:m});return new lt(S,H)},d=(M,N,y)=>{let S=new ut;M.forEach((D,I)=>{let[f,C]=y(D);I===0&&S.moveTo(f,-C),S.lineTo(f,-C)});let B=new ft(S,{depth:6,bevelEnabled:!1}),m=(Math.random()*.5+.5)*16777215,H=new at({color:m,transparent:!0,opacity:.5});return new ct(B,H)},L,w=null,R=null,E=M=>{let N=A(M),y=new st;y.setFromCamera(N,e);let S=y.intersectObjects([o],!0);S.length>0?(w&&w.object.properties!==S[0].object.properties&&(w.object.material.color.set(R),w=null),S[0].object.properties&&(R=S[0].object.material.color.clone(),S[0].object.material.color.set("red")),w=S[0]):w&&w.object.properties&&(w.object.material.color.set(R),w=null)};window.addEventListener("click",E);let A=M=>{let N={x:0,y:0},y=L.getBoundingClientRect(),S={x:(M.clientX-y.left)*y.width/y.width,y:(M.clientY-y.top)*y.height/y.height};return N.x=S.x/L.width*2-1,N.y=-(S.y/L.height)*2+1,N};return vt(()=>{t.value.appendChild(c.domElement),L=c.domElement}),(M,N)=>(dt(),gt("div",{id:"map",ref_key:"mapScene",ref:t},null,512))}};export{ne as default};
