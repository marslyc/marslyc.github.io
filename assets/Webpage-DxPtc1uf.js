import{S as X,o as Y,U as N,k as f,G as M,M as h,B as U,e as J,a as $,D as W,g as K,J as k,N as z,X as Q,W as Z,R as ee,V as te,l as ne}from"./three.module-DxqIPYNp.js";import{g as d}from"./index-DjKJqAo0.js";import{r as oe,o as re,h as ae,c as ie,a as se,b as o}from"./index-14mOdFxx.js";const le=o("div",{class:"page page0"},[o("h1",null,"魔方与投射光线"),o("h3",null,"THREE.Raycaster实现3d交互效果")],-1),de=o("div",{class:"page page1"},[o("h1",null,"酷炫三角形"),o("h3",null,"应用打造酷炫的三角形")],-1),ce=o("div",{class:"page page2"},[o("h1",null,"点光源"),o("h3",null,"点光源围绕照亮小球")],-1),we=[le,de,ce],ge={__name:"Webpage",setup(ue){let S=oe(null);const c=new X,n=new Y(75,window.innerWidth/window.innerHeight,.1,300);n.position.set(0,0,18),c.add(n);let C=new N(2,2,2),R=new f({wireframe:!0}),j=new f({color:"#ff0000"}),_=[],w=new M;for(let e=0;e<5;e++)for(let t=0;t<5;t++)for(let l=0;l<5;l++){let m=new h(C,R);m.position.set(e*2-4,t*2-4,l*2-4),w.add(m),_.push(m)}w.position.set(0,-4,0),c.add(w);let u=new M;for(let e=0;e<50;e++){let t=new U,l=new Float32Array(9);for(let x=0;x<9;x++)l[x]=Math.random()*10-5;t.setAttribute("position",new J(l,3));let m=new $(Math.random(),Math.random(),Math.random());const T=new f({color:m,side:W,transparent:!0,opacity:.5});let V=new h(t,T);u.add(V)}u.position.set(0,-34,0),c.add(u);let r=new M;const A=new K(20,20),I=new k,g=new h(A,I);g.position.set(0,-1,0),g.rotation.x=-Math.PI/2,g.receiveShadow=!0,r.add(g);const O=new z(1,20,20),q=new k({side:W}),b=new h(O,q);b.castShadow=!0,r.add(b);let i=new Q(16711680,1);i.castShadow=!0,i.shadow.radius=20,i.shadow.mapSize.set(512,512),i.decay=0,r.add(i);let p=new h(new z(.1,20,20),new f({color:16711680}));p.position.set(2,2,2),p.add(i),r.add(p),r.position.set(0,-64,0),c.add(r);let D=[w,u,r];const a=new Z({alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.shadowMap.enabled=!0,a.physicallyCorrectLights=!0;const F=new ne;d.to(w.rotation,{x:"+="+Math.PI*2,y:"+="+Math.PI*2,duration:5,ease:"power1.inOut",repeat:-1}),d.to(u.rotation,{x:"-="+Math.PI*2,z:"+="+Math.PI*2,duration:12,ease:"power2.inOut",repeat:-1}),d.to(p.position,{x:-3,duration:6,ease:"power2.inOut",repeat:-1,yoyo:!0}),d.to(p.position,{y:0,duration:.5,ease:"power2.inOut",repeat:-1,yoyo:!0});let E=new ee,s=new te,L=e=>{s.x=(e.clientX-180)/window.innerWidth*2-1,s.y=-(e.clientY/window.innerHeight)*2+1,E.setFromCamera(s,n);let t=E.intersectObjects(_);t[0]&&(t[0].object.material=j)};window.addEventListener("click",L);let G=e=>{s.x=e.clientX/window.innerWidth-.5,s.y=-(e.clientY/window.innerHeight)-.5};window.addEventListener("mousemove",G);let v=0;function P(){let e=F.getDelta();n.position.y=-(v/window.innerHeight)*30,n.position.x+=(s.x*10-n.position.x)*e*5,a.render(c,n),requestAnimationFrame(P)}let y=0,H=e=>{document.querySelector(".right-content"),v=-document.querySelector(".page0").getBoundingClientRect().top;let t=Math.round(v/window.innerHeight);t!==y&&(y=t,d.to(D[y].rotation,{z:"+="+Math.PI*2,duration:1,ease:"power1.inOut"}),d.fromTo(`.page${y} h1`,{x:-300},{x:0,rotate:"+=360",duration:1}))};re(()=>{S.value.appendChild(a.domElement),P(),document.querySelector(".right-content").addEventListener("scroll",H)}),ae(()=>{document.querySelector(".right-content").removeEventListener("scroll",H),window.removeEventListener("click",L),window.removeEventListener("mousemove",G),window.removeEventListener("resize",B)});let B=()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),a.setSize(window.innerWidth,window.innerHeight),a.setPixelRatio(window.devicePixelRatio)};return window.addEventListener("resize",B),(e,t)=>(se(),ie("div",{id:"box1",ref_key:"pageScene",ref:S,class:"pageScene"},we,512))}};export{ge as default};
