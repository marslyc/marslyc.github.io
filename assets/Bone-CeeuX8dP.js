import{S as b,r as C,v as M,u as W,T as B,H as d,I as A,D as H,A as k,J as E,q as P,W as U,l as y}from"./three.module-A37dimS0.js";import{O as z}from"./OrbitControls-zRnuQD7T.js";import{G as T}from"./GLTFLoader-EeHkup_U.js";import{R as j}from"./RGBELoader-DBVi1hD9.js";import{D as q}from"./DRACOLoader-DL23Qv3Y.js";import{g as G}from"./index-DjKJqAo0.js";import{r as O,o as F,f as J,c as X,a as I}from"./index-_YfaVgSB.js";const te={__name:"Bone",setup(K){let r=new b,n=new C(90,window.innerWidth/window.innerHeight,.1,1e5);n.position.set(0,2,2),n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),r.add(n);let L=new M(5);r.add(L);let S=new j,R=new URL("/assets/Dosch-Space_0026_4k-D05PfXp4.hdr",import.meta.url).href;S.load(R,e=>{e.mapping=W,r.background=e,r.environment=e});let v=new URL("/assets/cloth_pos-BBd7vi8q.png",import.meta.url).href,x=new URL("/assets/cloth_norm-BvXndDAR.png",import.meta.url).href,p=new B,a=p.load(v),o=p.load(x);a.wrapS=d,a.wrapT=d,a.repeat.set(.2,.2),o.wrapS=d,o.wrapT=d,o.repeat.set(.2,.2),a.offset.set(0,0),G.to(a.offset,{x:3,y:1,duration:1,repeat:-1,onUpdate:function(){a.needsUpdate=!0}});let i,c=new T,s=new q;s.setDecoderPath("/draco/gltf/"),s.setDecoderConfig({type:"js"}),s.preload(),c.setDRACOLoader(s);let D=new URL("/assets/jianshen-min-C3R3nWJB.glb",import.meta.url).href;c.load(D,e=>{r.add(e.scene),e.scene.traverse(g=>{g.isMesh&&(g.material=new A({map:a,normalMap:o,side:H,transparent:!0,blending:k,depthWrite:!1,emissiveMap:a}))}),i=new E(e.scene);let l=i.clipAction(e.animations[0]);l.play(),l.timeScale=2;const h=new P(16777215,2);h.position.set(0,100,100),r.add(h)},e=>{console.log(e.loaded/e.total*100+"% loaded")});let t=new U;t.setSize(window.innerWidth,window.innerHeight),t.shadowMap.enabled=!0,t.physicallyCorrectLights=!0,t.setClearColor(13421772,1);let m=()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight),t.setPixelRatio(window.devicePixelRatio)};window.addEventListener("resize",m);let w=new z(n,t.domElement);w.enableDamping=!0;let _=new y,f=()=>{let e=_.getDelta();i&&i.update(e),w.update(),requestAnimationFrame(f),t.render(r,n)};f();let u=O(null);return F(()=>{u.value.appendChild(t.domElement)}),J(()=>{window.removeEventListener("resize",m)}),(e,l)=>(I(),X("div",{id:"bone",ref_key:"boneScene",ref:u},null,512))}};export{te as default};
