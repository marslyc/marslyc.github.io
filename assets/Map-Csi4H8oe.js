import{S as Qn,r as Zn,v as jn,q as kn,p as bn,W as nt,O as An,F as tt,B as et,c as it,a as rt,L as ot,w as lt,x as ut,y as ft,k as at,M as ct,R as st}from"./three.module-BMQevBqr.js";import{O as pt}from"./OrbitControls-Cp2Fgrtw.js";import{r as ht,o as vt,f as gt,c as dt,a as wt}from"./index-DJjRFf5F.js";class Et{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const a=i[r],s=t+a,c=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);c&&(i[e++]=c),t=s}return i[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let i=this._n,e,r,a,s=0;if(i>0){for(s=t[--i];i>0&&(e=s,r=t[--i],s=e+r,a=r-(s-e),!a););i>0&&(a<0&&t[i-1]<0||a>0&&t[i-1]>0)&&(r=a*2,e=s+r,r==e-s&&(s=e))}return s}}function*St(n){for(const t of n)yield*t}function Un(n){return Array.from(St(n))}var T=1e-6,yt=1e-12,B=Math.PI,x=B/2,Nn=B/4,Y=B*2,U=180/B,F=B/180,O=Math.abs,Xn=Math.atan,nn=Math.atan2,W=Math.cos,Mt=Math.exp,mt=Math.log,q=Math.sin,Pt=Math.sign||function(n){return n>0?1:n<0?-1:0},vn=Math.sqrt,Rt=Math.tan;function Lt(n){return n>1?0:n<-1?B:Math.acos(n)}function tn(n){return n>1?x:n<-1?-x:Math.asin(n)}function k(){}function cn(n,t){n&&Cn.hasOwnProperty(n.type)&&Cn[n.type](n,t)}var zn={Feature:function(n,t){cn(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,e=-1,r=i.length;++e<r;)cn(i[e].geometry,t)}},Cn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)n=i[e],t.point(n[0],n[1],n[2])},LineString:function(n,t){wn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)wn(i[e],t,0)},Polygon:function(n,t){In(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,e=-1,r=i.length;++e<r;)In(i[e],t)},GeometryCollection:function(n,t){for(var i=n.geometries,e=-1,r=i.length;++e<r;)cn(i[e],t)}};function wn(n,t,i){var e=-1,r=n.length-i,a;for(t.lineStart();++e<r;)a=n[e],t.point(a[0],a[1],a[2]);t.lineEnd()}function In(n,t){var i=-1,e=n.length;for(t.polygonStart();++i<e;)wn(n[i],t,1);t.polygonEnd()}function At(n,t){n&&zn.hasOwnProperty(n.type)?zn[n.type](n,t):cn(n,t)}function En(n){return[nn(n[1],n[0]),tn(n[2])]}function Q(n){var t=n[0],i=n[1],e=W(i);return[e*W(t),e*q(t),q(i)]}function on(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function sn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function gn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ln(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Sn(n){var t=vn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function yn(n,t){function i(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(i.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),i}function Mn(n,t){return O(n)>B&&(n-=Math.round(n/Y)*Y),[n,t]}Mn.invert=Mn;function Yn(n,t,i){return(n%=Y)?t||i?yn(Dn(n),Tn(t,i)):Dn(n):t||i?Tn(t,i):Mn}function Bn(n){return function(t,i){return t+=n,O(t)>B&&(t-=Math.round(t/Y)*Y),[t,i]}}function Dn(n){var t=Bn(n);return t.invert=Bn(-n),t}function Tn(n,t){var i=W(n),e=q(n),r=W(t),a=q(t);function s(c,g){var v=W(g),o=W(c)*v,l=q(c)*v,u=q(g),p=u*i+o*e;return[nn(l*r-p*a,o*i-u*e),tn(p*r+l*a)]}return s.invert=function(c,g){var v=W(g),o=W(c)*v,l=q(c)*v,u=q(g),p=u*r-l*a;return[nn(l*r+u*a,o*i+p*e),tn(p*i-o*e)]},s}function Nt(n){n=Yn(n[0]*F,n[1]*F,n.length>2?n[2]*F:0);function t(i){return i=n(i[0]*F,i[1]*F),i[0]*=U,i[1]*=U,i}return t.invert=function(i){return i=n.invert(i[0]*F,i[1]*F),i[0]*=U,i[1]*=U,i},t}function zt(n,t,i,e,r,a){if(i){var s=W(t),c=q(t),g=e*i;r==null?(r=t+e*Y,a=t-g/2):(r=Hn(s,r),a=Hn(s,a),(e>0?r<a:r>a)&&(r+=e*Y));for(var v,o=r;e>0?o>a:o<a;o-=g)v=En([s,-c*W(o),-c*q(o)]),n.point(v[0],v[1])}}function Hn(n,t){t=Q(t),t[0]-=n,Sn(t);var i=Lt(-t[1]);return((-t[2]<0?-i:i)+Y-T)%Y}function Jn(){var n=[],t;return{point:function(i,e,r){t.push([i,e,r])},lineStart:function(){n.push(t=[])},lineEnd:k,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var i=n;return n=[],t=null,i}}}function an(n,t){return O(n[0]-t[0])<T&&O(n[1]-t[1])<T}function un(n,t,i,e){this.x=n,this.z=t,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Vn(n,t,i,e,r){var a=[],s=[],c,g;if(n.forEach(function(h){if(!((m=h.length-1)<=0)){var m,d=h[0],N=h[m],w;if(an(d,N)){if(!d[2]&&!N[2]){for(r.lineStart(),c=0;c<m;++c)r.point((d=h[c])[0],d[1]);r.lineEnd();return}N[0]+=2*T}a.push(w=new un(d,h,null,!0)),s.push(w.o=new un(d,null,w,!1)),a.push(w=new un(N,h,null,!1)),s.push(w.o=new un(N,null,w,!0))}}),!!a.length){for(s.sort(t),On(a),On(s),c=0,g=s.length;c<g;++c)s[c].e=i=!i;for(var v=a[0],o,l;;){for(var u=v,p=!0;u.v;)if((u=u.n)===v)return;o=u.z,r.lineStart();do{if(u.v=u.o.v=!0,u.e){if(p)for(c=0,g=o.length;c<g;++c)r.point((l=o[c])[0],l[1]);else e(u.x,u.n.x,1,r);u=u.n}else{if(p)for(o=u.p.z,c=o.length-1;c>=0;--c)r.point((l=o[c])[0],l[1]);else e(u.x,u.p.x,-1,r);u=u.p}u=u.o,o=u.z,p=!p}while(!u.v);r.lineEnd()}}}function On(n){if(t=n.length){for(var t,i=0,e=n[0],r;++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function dn(n){return O(n[0])<=B?n[0]:Pt(n[0])*((O(n[0])+B)%Y-B)}function Ct(n,t){var i=dn(t),e=t[1],r=q(e),a=[q(i),-W(i),0],s=0,c=0,g=new Et;r===1?e=x+T:r===-1&&(e=-x-T);for(var v=0,o=n.length;v<o;++v)if(u=(l=n[v]).length)for(var l,u,p=l[u-1],h=dn(p),m=p[1]/2+Nn,d=q(m),N=W(m),w=0;w<u;++w,h=E,d=C,N=A,p=P){var P=l[w],E=dn(P),z=P[1]/2+Nn,C=q(z),A=W(z),R=E-h,S=R>=0?1:-1,M=S*R,y=M>B,H=d*C;if(g.add(nn(H*S*q(M),N*A+H*W(M))),s+=y?R+S*Y:R,y^h>=i^E>=i){var D=sn(Q(p),Q(P));Sn(D);var I=sn(a,D);Sn(I);var f=(y^R>=0?-1:1)*tn(I[2]);(e>f||e===f&&(D[0]||D[1]))&&(c+=y^R>=0?1:-1)}}return(s<-T||s<T&&g<-yt)^c&1}function $n(n,t,i,e){return function(r){var a=t(r),s=Jn(),c=t(s),g=!1,v,o,l,u={point:p,lineStart:m,lineEnd:d,polygonStart:function(){u.point=N,u.lineStart=w,u.lineEnd=P,o=[],v=[]},polygonEnd:function(){u.point=p,u.lineStart=m,u.lineEnd=d,o=Un(o);var E=Ct(v,e);o.length?(g||(r.polygonStart(),g=!0),Vn(o,Bt,E,i,r)):E&&(g||(r.polygonStart(),g=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),o=v=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(E,z){n(E,z)&&r.point(E,z)}function h(E,z){a.point(E,z)}function m(){u.point=h,a.lineStart()}function d(){u.point=p,a.lineEnd()}function N(E,z){l.push([E,z]),c.point(E,z)}function w(){c.lineStart(),l=[]}function P(){N(l[0][0],l[0][1]),c.lineEnd();var E=c.clean(),z=s.result(),C,A=z.length,R,S,M;if(l.pop(),v.push(l),l=null,!!A){if(E&1){if(S=z[0],(R=S.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),C=0;C<R;++C)r.point((M=S[C])[0],M[1]);r.lineEnd()}return}A>1&&E&2&&z.push(z.pop().concat(z.shift())),o.push(z.filter(It))}}return u}}function It(n){return n.length>1}function Bt(n,t){return((n=n.x)[0]<0?n[1]-x-T:x-n[1])-((t=t.x)[0]<0?t[1]-x-T:x-t[1])}const _n=$n(function(){return!0},Dt,Ht,[-B,-x]);function Dt(n){var t=NaN,i=NaN,e=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(a,s){var c=a>0?B:-B,g=O(a-t);O(g-B)<T?(n.point(t,i=(i+s)/2>0?x:-x),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(c,i),n.point(a,i),r=0):e!==c&&g>=B&&(O(t-e)<T&&(t-=e*T),O(a-c)<T&&(a-=c*T),i=Tt(t,i,a,s),n.point(e,i),n.lineEnd(),n.lineStart(),n.point(c,i),r=0),n.point(t=a,i=s),e=c},lineEnd:function(){n.lineEnd(),t=i=NaN},clean:function(){return 2-r}}}function Tt(n,t,i,e){var r,a,s=q(n-i);return O(s)>T?Xn((q(t)*(a=W(e))*q(i)-q(e)*(r=W(t))*q(n))/(r*a*s)):(t+e)/2}function Ht(n,t,i,e){var r;if(n==null)r=i*x,e.point(-B,r),e.point(0,r),e.point(B,r),e.point(B,0),e.point(B,-r),e.point(0,-r),e.point(-B,-r),e.point(-B,0),e.point(-B,r);else if(O(n[0]-t[0])>T){var a=n[0]<t[0]?B:-B;r=i*a/2,e.point(-a,r),e.point(0,r),e.point(a,r)}else e.point(t[0],t[1])}function Ot(n){var t=W(n),i=2*F,e=t>0,r=O(t)>T;function a(o,l,u,p){zt(p,n,i,u,o,l)}function s(o,l){return W(o)*W(l)>t}function c(o){var l,u,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(d,N){var w=[d,N],P,E=s(d,N),z=e?E?0:v(d,N):E?v(d+(d<0?B:-B),N):0;if(!l&&(h=p=E)&&o.lineStart(),E!==p&&(P=g(l,w),(!P||an(l,P)||an(w,P))&&(w[2]=1)),E!==p)m=0,E?(o.lineStart(),P=g(w,l),o.point(P[0],P[1])):(P=g(l,w),o.point(P[0],P[1],2),o.lineEnd()),l=P;else if(r&&l&&e^E){var C;!(z&u)&&(C=g(w,l,!0))&&(m=0,e?(o.lineStart(),o.point(C[0][0],C[0][1]),o.point(C[1][0],C[1][1]),o.lineEnd()):(o.point(C[1][0],C[1][1]),o.lineEnd(),o.lineStart(),o.point(C[0][0],C[0][1],3)))}E&&(!l||!an(l,w))&&o.point(w[0],w[1]),l=w,p=E,u=z},lineEnd:function(){p&&o.lineEnd(),l=null},clean:function(){return m|(h&&p)<<1}}}function g(o,l,u){var p=Q(o),h=Q(l),m=[1,0,0],d=sn(p,h),N=on(d,d),w=d[0],P=N-w*w;if(!P)return!u&&o;var E=t*N/P,z=-t*w/P,C=sn(m,d),A=ln(m,E),R=ln(d,z);gn(A,R);var S=C,M=on(A,S),y=on(S,S),H=M*M-y*(on(A,A)-1);if(!(H<0)){var D=vn(H),I=ln(S,(-M-D)/y);if(gn(I,A),I=En(I),!u)return I;var f=o[0],L=l[0],_=o[1],G=l[1],X;L<f&&(X=f,f=L,L=X);var j=L-f,J=O(j-B)<T,$=J||j<T;if(!J&&G<_&&(X=_,_=G,G=X),$?J?_+G>0^I[1]<(O(I[0]-f)<T?_:G):_<=I[1]&&I[1]<=G:j>B^(f<=I[0]&&I[0]<=L)){var V=ln(S,(-M+D)/y);return gn(V,A),[I,En(V)]}}}function v(o,l){var u=e?n:B-n,p=0;return o<-u?p|=1:o>u&&(p|=2),l<-u?p|=4:l>u&&(p|=8),p}return $n(s,c,a,e?[0,-n]:[-B,n-B])}function _t(n,t,i,e,r,a){var s=n[0],c=n[1],g=t[0],v=t[1],o=0,l=1,u=g-s,p=v-c,h;if(h=i-s,!(!u&&h>0)){if(h/=u,u<0){if(h<o)return;h<l&&(l=h)}else if(u>0){if(h>l)return;h>o&&(o=h)}if(h=r-s,!(!u&&h<0)){if(h/=u,u<0){if(h>l)return;h>o&&(o=h)}else if(u>0){if(h<o)return;h<l&&(l=h)}if(h=e-c,!(!p&&h>0)){if(h/=p,p<0){if(h<o)return;h<l&&(l=h)}else if(p>0){if(h>l)return;h>o&&(o=h)}if(h=a-c,!(!p&&h<0)){if(h/=p,p<0){if(h>l)return;h>o&&(o=h)}else if(p>0){if(h<o)return;h<l&&(l=h)}return o>0&&(n[0]=s+o*u,n[1]=c+o*p),l<1&&(t[0]=s+l*u,t[1]=c+l*p),!0}}}}}var b=1e9,fn=-b;function Wt(n,t,i,e){function r(v,o){return n<=v&&v<=i&&t<=o&&o<=e}function a(v,o,l,u){var p=0,h=0;if(v==null||(p=s(v,l))!==(h=s(o,l))||g(v,o)<0^l>0)do u.point(p===0||p===3?n:i,p>1?e:t);while((p=(p+l+4)%4)!==h);else u.point(o[0],o[1])}function s(v,o){return O(v[0]-n)<T?o>0?0:3:O(v[0]-i)<T?o>0?2:1:O(v[1]-t)<T?o>0?1:0:o>0?3:2}function c(v,o){return g(v.x,o.x)}function g(v,o){var l=s(v,1),u=s(o,1);return l!==u?l-u:l===0?o[1]-v[1]:l===1?v[0]-o[0]:l===2?v[1]-o[1]:o[0]-v[0]}return function(v){var o=v,l=Jn(),u,p,h,m,d,N,w,P,E,z,C,A={point:R,lineStart:H,lineEnd:D,polygonStart:M,polygonEnd:y};function R(f,L){r(f,L)&&o.point(f,L)}function S(){for(var f=0,L=0,_=p.length;L<_;++L)for(var G=p[L],X=1,j=G.length,J=G[0],$,V,rn=J[0],K=J[1];X<j;++X)$=rn,V=K,J=G[X],rn=J[0],K=J[1],V<=e?K>e&&(rn-$)*(e-V)>(K-V)*(n-$)&&++f:K<=e&&(rn-$)*(e-V)<(K-V)*(n-$)&&--f;return f}function M(){o=l,u=[],p=[],C=!0}function y(){var f=S(),L=C&&f,_=(u=Un(u)).length;(L||_)&&(v.polygonStart(),L&&(v.lineStart(),a(null,null,1,v),v.lineEnd()),_&&Vn(u,c,f,a,v),v.polygonEnd()),o=v,u=p=h=null}function H(){A.point=I,p&&p.push(h=[]),z=!0,E=!1,w=P=NaN}function D(){u&&(I(m,d),N&&E&&l.rejoin(),u.push(l.result())),A.point=R,E&&o.lineEnd()}function I(f,L){var _=r(f,L);if(p&&h.push([f,L]),z)m=f,d=L,N=_,z=!1,_&&(o.lineStart(),o.point(f,L));else if(_&&E)o.point(f,L);else{var G=[w=Math.max(fn,Math.min(b,w)),P=Math.max(fn,Math.min(b,P))],X=[f=Math.max(fn,Math.min(b,f)),L=Math.max(fn,Math.min(b,L))];_t(G,X,n,t,i,e)?(E||(o.lineStart(),o.point(G[0],G[1])),o.point(X[0],X[1]),_||o.lineEnd(),C=!1):_&&(o.lineStart(),o.point(f,L),C=!1)}w=f,P=L,E=_}return A}}const Wn=n=>n;var Z=1/0,pn=Z,en=-Z,hn=en,qn={point:qt,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var n=[[Z,pn],[en,hn]];return en=hn=-(pn=Z=1/0),n}};function qt(n,t){n<Z&&(Z=n),n>en&&(en=n),t<pn&&(pn=t),t>hn&&(hn=t)}function Pn(n){return function(t){var i=new mn;for(var e in n)i[e]=n[e];return i.stream=t,i}}function mn(){}mn.prototype={constructor:mn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rn(n,t,i){var e=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),e!=null&&n.clipExtent(null),At(i,n.stream(qn)),t(qn.result()),e!=null&&n.clipExtent(e),n}function Kn(n,t,i){return Rn(n,function(e){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(e[1][0]-e[0][0]),a/(e[1][1]-e[0][1])),c=+t[0][0]+(r-s*(e[1][0]+e[0][0]))/2,g=+t[0][1]+(a-s*(e[1][1]+e[0][1]))/2;n.scale(150*s).translate([c,g])},i)}function Ft(n,t,i){return Kn(n,[[0,0],t],i)}function Gt(n,t,i){return Rn(n,function(e){var r=+t,a=r/(e[1][0]-e[0][0]),s=(r-a*(e[1][0]+e[0][0]))/2,c=-a*e[0][1];n.scale(150*a).translate([s,c])},i)}function xt(n,t,i){return Rn(n,function(e){var r=+t,a=r/(e[1][1]-e[0][1]),s=-a*e[0][0],c=(r-a*(e[1][1]+e[0][1]))/2;n.scale(150*a).translate([s,c])},i)}var Fn=16,Ut=W(30*F);function Gn(n,t){return+t?Yt(n,t):Xt(n)}function Xt(n){return Pn({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}function Yt(n,t){function i(e,r,a,s,c,g,v,o,l,u,p,h,m,d){var N=v-e,w=o-r,P=N*N+w*w;if(P>4*t&&m--){var E=s+u,z=c+p,C=g+h,A=vn(E*E+z*z+C*C),R=tn(C/=A),S=O(O(C)-1)<T||O(a-l)<T?(a+l)/2:nn(z,E),M=n(S,R),y=M[0],H=M[1],D=y-e,I=H-r,f=w*D-N*I;(f*f/P>t||O((N*D+w*I)/P-.5)>.3||s*u+c*p+g*h<Ut)&&(i(e,r,a,s,c,g,y,H,S,E/=A,z/=A,C,m,d),d.point(y,H),i(y,H,S,E,z,C,v,o,l,u,p,h,m,d))}}return function(e){var r,a,s,c,g,v,o,l,u,p,h,m,d={point:N,lineStart:w,lineEnd:E,polygonStart:function(){e.polygonStart(),d.lineStart=z},polygonEnd:function(){e.polygonEnd(),d.lineStart=w}};function N(R,S){R=n(R,S),e.point(R[0],R[1])}function w(){l=NaN,d.point=P,e.lineStart()}function P(R,S){var M=Q([R,S]),y=n(R,S);i(l,u,o,p,h,m,l=y[0],u=y[1],o=R,p=M[0],h=M[1],m=M[2],Fn,e),e.point(l,u)}function E(){d.point=N,e.lineEnd()}function z(){w(),d.point=C,d.lineEnd=A}function C(R,S){P(r=R,S),a=l,s=u,c=p,g=h,v=m,d.point=P}function A(){i(l,u,o,p,h,m,a,s,r,c,g,v,Fn,e),d.lineEnd=E,E()}return d}}var Jt=Pn({point:function(n,t){this.stream.point(n*F,t*F)}});function Vt(n){return Pn({point:function(t,i){var e=n(t,i);return this.stream.point(e[0],e[1])}})}function $t(n,t,i,e,r){function a(s,c){return s*=e,c*=r,[t+n*s,i-n*c]}return a.invert=function(s,c){return[(s-t)/n*e,(i-c)/n*r]},a}function xn(n,t,i,e,r,a){if(!a)return $t(n,t,i,e,r);var s=W(a),c=q(a),g=s*n,v=c*n,o=s/n,l=c/n,u=(c*i-s*t)/n,p=(c*t+s*i)/n;function h(m,d){return m*=e,d*=r,[g*m-v*d+t,i-v*m-g*d]}return h.invert=function(m,d){return[e*(o*m-l*d+u),r*(p-l*m-o*d)]},h}function Kt(n){return Qt(function(){return n})()}function Qt(n){var t,i=150,e=480,r=250,a=0,s=0,c=0,g=0,v=0,o,l=0,u=1,p=1,h=null,m=_n,d=null,N,w,P,E=Wn,z=.5,C,A,R,S,M;function y(f){return R(f[0]*F,f[1]*F)}function H(f){return f=R.invert(f[0],f[1]),f&&[f[0]*U,f[1]*U]}y.stream=function(f){return S&&M===f?S:S=Jt(Vt(o)(m(C(E(M=f)))))},y.preclip=function(f){return arguments.length?(m=f,h=void 0,I()):m},y.postclip=function(f){return arguments.length?(E=f,d=N=w=P=null,I()):E},y.clipAngle=function(f){return arguments.length?(m=+f?Ot(h=f*F):(h=null,_n),I()):h*U},y.clipExtent=function(f){return arguments.length?(E=f==null?(d=N=w=P=null,Wn):Wt(d=+f[0][0],N=+f[0][1],w=+f[1][0],P=+f[1][1]),I()):d==null?null:[[d,N],[w,P]]},y.scale=function(f){return arguments.length?(i=+f,D()):i},y.translate=function(f){return arguments.length?(e=+f[0],r=+f[1],D()):[e,r]},y.center=function(f){return arguments.length?(a=f[0]%360*F,s=f[1]%360*F,D()):[a*U,s*U]},y.rotate=function(f){return arguments.length?(c=f[0]%360*F,g=f[1]%360*F,v=f.length>2?f[2]%360*F:0,D()):[c*U,g*U,v*U]},y.angle=function(f){return arguments.length?(l=f%360*F,D()):l*U},y.reflectX=function(f){return arguments.length?(u=f?-1:1,D()):u<0},y.reflectY=function(f){return arguments.length?(p=f?-1:1,D()):p<0},y.precision=function(f){return arguments.length?(C=Gn(A,z=f*f),I()):vn(z)},y.fitExtent=function(f,L){return Kn(y,f,L)},y.fitSize=function(f,L){return Ft(y,f,L)},y.fitWidth=function(f,L){return Gt(y,f,L)},y.fitHeight=function(f,L){return xt(y,f,L)};function D(){var f=xn(i,0,0,u,p,l).apply(null,t(a,s)),L=xn(i,e-f[0],r-f[1],u,p,l);return o=Yn(c,g,v),A=yn(t,L),R=yn(o,A),C=Gn(A,z),I()}function I(){return S=M=null,y}return function(){return t=n.apply(this,arguments),y.invert=t.invert&&H,D()}}function Ln(n,t){return[n,mt(Rt((x+t)/2))]}Ln.invert=function(n,t){return[n,2*Xn(Mt(t))-x]};function Zt(){return jt(Ln).scale(961/Y)}function jt(n){var t=Kt(n),i=t.center,e=t.scale,r=t.translate,a=t.clipExtent,s=null,c,g,v;t.scale=function(l){return arguments.length?(e(l),o()):e()},t.translate=function(l){return arguments.length?(r(l),o()):r()},t.center=function(l){return arguments.length?(i(l),o()):i()},t.clipExtent=function(l){return arguments.length?(l==null?s=c=g=v=null:(s=+l[0][0],c=+l[0][1],g=+l[1][0],v=+l[1][1]),o()):s==null?null:[[s,c],[g,v]]};function o(){var l=B*e(),u=t(Nt(t.rotate()).invert([0,0]));return a(s==null?[[u[0]-l,u[1]-l],[u[0]+l,u[1]+l]]:n===Ln?[[Math.max(u[0]-l,s),c],[Math.min(u[0]+l,g),v]]:[[s,Math.max(u[1]-l,c)],[g,Math.min(u[1]+l,v)]])}return o()}const te={__name:"Map",setup(n){let t=ht(),i=new Qn,e=new Zn(90,window.innerWidth/window.innerHeight,.1,1e5);e.position.set(0,0,100),e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),i.add(e);let r=new jn(5);i.add(r);let a=new kn(16777215,1);i.add(a);const s=new bn(16777215,.5);i.add(s);let c=new nt;c.setSize(window.innerWidth,window.innerHeight);let g=()=>{e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight),c.setPixelRatio(window.devicePixelRatio)};window.addEventListener("resize",g);let v=new pt(e,c.domElement);v.enableDamping=!0;let o=new An,l=Zt().center([116.402,39.915]).translate([0,0,0]),u=new tt,p=new URL("/assets/map-BqTUXMPq.json",import.meta.url).href;u.load(p,A=>{let R=JSON.parse(A);h(R)});let h=A=>{A.features.forEach(S=>{let M=new An;M.name=S.properties.name;let y=S.geometry.coordinates,H="#99ff99";S.geometry.type==="MultiPolygon"&&y.forEach(D=>{D.forEach(I=>{let f=m(I,H,l),L=d(I,H,l);L.properties=S.properties.name,M.add(f),M.add(L)})}),S.geometry.type==="Polygon"&&y.forEach(D=>{let I=m(D,H,l),f=d(D,H,l);f.properties=S.properties.name,M.add(I),M.add(f)}),o.add(M)}),i.add(o)},m=(A,R,S)=>{let M=new et,y=new Array;A.forEach(I=>{let[f,L]=S(I);y.push(new it(f,-L,5))}),M.setFromPoints(y);let H=new rt(Math.random()*.5+.5,Math.random()*.5+.5,Math.random()*.5+.5),D=new ot({color:H});return new lt(M,D)},d=(A,R,S)=>{let M=new ut;A.forEach((I,f)=>{let[L,_]=S(I);f===0&&M.moveTo(L,-_),M.lineTo(L,-_)});let y=new ft(M,{depth:6,bevelEnabled:!1}),H=(Math.random()*.5+.5)*16777215,D=new at({color:H,transparent:!0,opacity:.5});return new ct(y,D)},N,w=null,P=null,E=A=>{let R=z(A),S=new st;S.setFromCamera(R,e);let M=S.intersectObjects([o],!0);M.length>0?(w&&w.object.properties!==M[0].object.properties&&(w.object.material.color.set(P),w=null),M[0].object.properties&&(P=M[0].object.material.color.clone(),M[0].object.material.color.set("red")),w=M[0]):w&&w.object.properties&&(w.object.material.color.set(P),w=null)};window.addEventListener("click",E);let z=A=>{let R={x:0,y:0},S=N.getBoundingClientRect(),M={x:(A.clientX-S.left)*S.width/S.width,y:(A.clientY-S.top)*S.height/S.height};return R.x=M.x/N.width*2-1,R.y=-(M.y/N.height)*2+1,R},C=()=>{v.update(),requestAnimationFrame(C),c.render(i,e)};return C(),vt(()=>{t.value.appendChild(c.domElement),N=c.domElement}),gt(()=>{window.removeEventListener("resize",g),window.removeEventListener("click",E)}),(A,R)=>(wt(),dt("div",{id:"map",ref_key:"mapScene",ref:t},null,512))}};export{te as default};
