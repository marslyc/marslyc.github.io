import{T as q,R as V,o as J,S as Y,n as K,m as Q,N as P,Y as W,V as X,M as A,d as Z,c as l,B as $,L as ee,w as te,W as ne,l as se}from"./three.module-DxqIPYNp.js";import{O as ae}from"./OrbitControls-UtDBv3EV.js";import{C as g,a as oe}from"./CSS2DRenderer-c3QseulI.js";import{r as ie,o as re,h as le,c as ce,a as me}from"./index-CN0LzfL9.js";const ue={__name:"Earth",setup(de){let f=document.querySelector(".left-menu").offsetWidth||180,s=window.innerWidth-f,a=window.innerHeight,h=ie(null),n,e,i,t,H=new se,c=new q,m,d,o,u,D=new V;O(),E();function O(){e=new J(45,s/a,.1,200),e.position.set(0,5,-10),n=new Y;const p=new K(16777215);p.position.set(0,0,1),n.add(p);const w=new Q(16777215,1);n.add(w);let L=new URL("/assets/earth_atmos_2048-d1pdJ3jg.jpg",import.meta.url).href,v=new URL("/assets/earth_specular_2048-6aAFN27D.jpg",import.meta.url).href,x=new URL("/assets/earth_normal_2048-BD2vMuPH.jpg",import.meta.url).href;const T=new P(1,16,16),U=new W({specular:3355443,shininess:5,map:c.load(L),specularMap:c.load(v),normalMap:c.load(x),normalScale:new X(.85,.85)});d=new A(T,U),n.add(d);let z=new URL("/assets/moon_1024-D_Wp7Gh9.jpg",import.meta.url).href;const N=new P(.27,16,16),B=new W({shininess:5,map:c.load(z)});m=new A(N,B),n.add(m),u=new Z([new l(-3,2,-3),new l(-3,3,-3),new l(0,0,5),new l(3,-5,3),new l(5,0,5)],!0);let G=u.getPoints(50),I=new $().setFromPoints(G),k=new ee({color:16777215}),F=new te(I,k);n.add(F);const _=document.createElement("div");_.className="label",_.innerHTML="地球";const y=new g(_);y.position.set(0,1,0),d.add(y);const b=document.createElement("div");b.className="label1",b.innerHTML="中国",o=new g(b),o.position.set(-.3,.5,-.9),d.add(o);const R=document.createElement("div");R.className="label",R.innerHTML="月球";const C=new g(R);C.position.set(0,.3,0),m.add(C),t=new oe,t.setSize(s,a),t.domElement.style.position="absolute",t.domElement.style.top="0px",t.domElement.style.left="0px",t.domElement.style.zIndex="10",i=new ne,i.setPixelRatio(window.devicePixelRatio),i.setSize(s,a),re(()=>{h.value.appendChild(t.domElement),h.value.appendChild(i.domElement)});const j=new ae(e,t.domElement);j.minDistance=5,j.maxDistance=100,f=document.querySelector(".left-menu").offsetWidth||180,window.addEventListener("resize",M),le(()=>{window.removeEventListener("resize",M)})}function M(){s=window.innerWidth-f,a=window.innerHeight,e.aspect=s/a,e.updateProjectionMatrix(),i.setSize(s,a),t.setSize(s,a)}function E(){requestAnimationFrame(E);const S=H.getElapsedTime(),r=o.position.clone(),p=r.distanceTo(e.position);r.project(e),D.setFromCamera(r,e);const w=D.intersectObjects(n.children,!0);w.length==0?o.element.classList.add("visible"):w[0].distance<p?o.element.classList.remove("visible"):o.element.classList.add("visible");const L=S/10%1,v=u.getPoint(L);m.position.copy(v),t.render(n,e),i.render(n,e)}return(S,r)=>(me(),ce("div",{id:"box1",class:"earthScene",ref_key:"earthScene",ref:h},null,512))}};export{ue as default};
